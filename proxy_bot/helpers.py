import asyncio
import random

from aiogram.types import InlineKeyboardButton
from aiogram.utils.keyboard import InlineKeyboardBuilder

from proxy_bot.constants.load_constants import Constant
from proxy_bot.imports import bot
from proxy_bot.settings import settings


async def check_member_user(user_id: int):
    status = await bot.get_chat_member(chat_id=settings.CHAT_SUB_ID, user_id=user_id)
    if status.status == 'left':
        return False
    return True


def countries_dict(code: str):
    countries = {'ru': 'ğŸ‡·ğŸ‡º Ğ Ğ¾ÑÑĞ¸Ñ',
                 'ca': 'ğŸ‡¨ğŸ‡¦ ĞšĞ°Ğ½Ğ°Ğ´Ğ°',
                 'us': 'ğŸ‡ºğŸ‡¸ Ğ¡Ğ¨Ğ',
                 'de': 'ğŸ‡©ğŸ‡ª Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ',
                 'gb': 'ğŸ‡¬ğŸ‡§ Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ',
                 'nl': 'ğŸ‡³ğŸ‡± ĞĞ¸Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ñ‹',
                 'es': 'ğŸ‡ªğŸ‡¸ Ğ˜ÑĞ¿Ğ°Ğ½Ğ¸Ñ',
                 'it': 'ğŸ‡®ğŸ‡¹ Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ',
                 'id': 'ğŸ‡®ğŸ‡© Ğ˜Ğ½Ğ´Ğ¾Ğ½ĞµĞ·Ğ¸Ñ',
                 'fr': 'ğŸ‡«ğŸ‡· Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ',
                 'ch': 'ğŸ‡¨ğŸ‡­ Ğ¨Ğ²ĞµĞ¹Ñ†Ğ°Ñ€Ğ¸Ñ',
                 'pt': 'ğŸ‡µğŸ‡¹ ĞŸĞ¾Ñ€Ñ‚ÑƒĞ³Ğ°Ğ»Ğ¸Ñ',
                 'ua': 'ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°',
                 'kz': 'ğŸ‡°ğŸ‡¿ ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½',
                 'cn': 'ğŸ‡¨ğŸ‡³ ĞšĞ¸Ñ‚Ğ°Ğ¹',
                 'pl': 'ğŸ‡µğŸ‡± ĞŸĞ¾Ğ»ÑŒÑˆĞ°',
                 'in': 'ğŸ‡®ğŸ‡³ Ğ˜Ğ½Ğ´Ğ¸Ñ',
                 'jp': 'ğŸ‡¯ğŸ‡µ Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñ',
                 'ab': 'ĞĞ±Ñ…Ğ°Ğ·Ğ¸Ñ',
                 'ad': 'ğŸ‡¦ğŸ‡© ĞĞ½Ğ´Ğ¾Ñ€Ñ€Ğ°',
                 'au': 'ğŸ‡¦ğŸ‡º ĞĞ²ÑÑ‚Ñ€Ğ°Ğ»Ğ¸Ñ',
                 'at': 'ğŸ‡¦ğŸ‡¹ ĞĞ²ÑÑ‚Ñ€Ğ¸Ñ',
                 'az': 'ğŸ‡¦ğŸ‡¿ ĞĞ·ĞµÑ€Ğ±Ğ°Ğ¹Ğ´Ğ¶Ğ°Ğ½',
                 'al': 'ğŸ‡¦ğŸ‡± ĞĞ»Ğ±Ğ°Ğ½Ğ¸Ñ',
                 'dz': 'ğŸ‡©ğŸ‡¿ ĞĞ»Ğ¶Ğ¸Ñ€',
                 'ar': 'ğŸ‡¦ğŸ‡· ĞÑ€Ğ³ĞµĞ½Ñ‚Ğ¸Ğ½Ğ°',
                 'am': 'ğŸ‡¦ğŸ‡² ĞÑ€Ğ¼ĞµĞ½Ğ¸Ñ',
                 'bd': 'ğŸ‡§ğŸ‡© Ğ‘Ğ°Ğ½Ğ³Ğ»Ğ°Ğ´ĞµÑˆ',
                 'by': 'ğŸ‡§ğŸ‡¾ Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑÑŒ',
                 'be': 'ğŸ‡§ğŸ‡ª Ğ‘ĞµĞ»ÑŒĞ³Ğ¸Ñ',
                 'bg': 'ğŸ‡§ğŸ‡¬ Ğ‘Ğ¾Ğ»Ğ³Ğ°Ñ€Ğ¸Ñ',
                 'bo': 'ğŸ‡§ğŸ‡´ Ğ‘Ğ¾Ğ»Ğ¸Ğ²Ğ¸Ñ',
                 'ba': 'ğŸ‡§ğŸ‡¦ Ğ‘Ğ¾ÑĞ½Ğ¸Ñ Ğ¸ Ğ“ĞµÑ€Ñ†ĞµĞ³Ğ¾Ğ²Ğ¸Ğ½Ğ°',
                 'br': 'ğŸ‡§ğŸ‡· Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ñ',
                 'bs': 'ğŸ‡§ğŸ‡¸ Ğ‘Ğ°Ğ³Ğ°Ğ¼ÑĞºĞ¸Ğµ Ğ¾ÑÑ‚Ñ€Ğ¾Ğ²Ğ°',
                 'bh': 'ğŸ‡§ğŸ‡­ Ğ‘Ğ°Ñ…Ñ€ĞµĞ¹Ğ½',
                 'mg': 'ğŸ‡²ğŸ‡¬ ĞœĞ°Ğ´Ğ°Ğ³Ğ°ÑĞºĞ°Ñ€',
                 'hu': 'ğŸ‡­ğŸ‡º Ğ’ĞµĞ½Ğ³Ñ€Ğ¸Ñ',
                 've': 'ğŸ‡»ğŸ‡ª Ğ’ĞµĞ½ĞµÑÑƒÑĞ»Ğ°',
                 'vn': 'ğŸ‡»ğŸ‡³ Ğ’ÑŒĞµÑ‚Ğ½Ğ°Ğ¼',
                 'hk': 'ğŸ‡­ğŸ‡° Ğ“Ğ¾Ğ½ĞºĞ¾Ğ½Ğ³',
                 'gr': 'ğŸ‡¬ğŸ‡· Ğ“Ñ€ĞµÑ†Ğ¸Ñ',
                 'ge': 'ğŸ‡¬ğŸ‡ª Ğ“Ñ€ÑƒĞ·Ğ¸Ñ',
                 'dk': 'ğŸ‡©ğŸ‡° Ğ”Ğ°Ğ½Ğ¸Ñ',
                 'eg': 'ğŸ‡ªğŸ‡¬ Ğ•Ğ³Ğ¸Ğ¿ĞµÑ‚',
                 'zm': 'ğŸ‡¿ğŸ‡² Ğ—Ğ°Ğ¼Ğ±Ğ¸Ñ',
                 'il': 'ğŸ‡®ğŸ‡± Ğ˜Ğ·Ñ€Ğ°Ğ¸Ğ»ÑŒ',
                 'jo': 'ğŸ‡¯ğŸ‡´ Ğ˜Ğ¾Ñ€Ğ´Ğ°Ğ½Ğ¸Ñ',
                 'iq': 'ğŸ‡®ğŸ‡¶ Ğ˜Ñ€Ğ°Ğº',
                 'ir': 'ğŸ‡®ğŸ‡· Ğ˜Ñ€Ğ°Ğ½',
                 'ie': 'ğŸ‡®ğŸ‡ª Ğ˜Ñ€Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ',
                 'is': 'ğŸ‡®ğŸ‡¸ Ğ˜ÑĞ»Ğ°Ğ½Ğ´Ğ¸Ñ',
                 'kh': 'ğŸ‡°ğŸ‡­ ĞšĞ°Ğ¼Ğ±Ğ¾Ğ´Ğ¶Ğ°',
                 'cm': 'ğŸ‡¨ğŸ‡² ĞšĞ°Ğ¼ĞµÑ€ÑƒĞ½',
                 'gt': 'Ğ“Ğ²Ğ°Ñ‚ĞµĞ¼Ğ°Ğ»Ğ°',
                 'qa': 'ğŸ‡¶ğŸ‡¦ ĞšĞ°Ñ‚Ğ°Ñ€',
                 'ke': 'ğŸ‡°ğŸ‡ª ĞšĞµĞ½Ğ¸Ñ',
                 'cy': 'ğŸ‡¨ğŸ‡¾ ĞšĞ¸Ğ¿Ñ€',
                 'co': 'ğŸ‡¨ğŸ‡´ ĞšĞ¾Ğ»ÑƒĞ¼Ğ±Ğ¸Ñ',
                 'kr': 'ğŸ‡°ğŸ‡· ĞšĞ¾Ñ€ĞµÑ',
                 'cr': 'ğŸ‡¨ğŸ‡· ĞšĞ¾ÑÑ‚Ğ°-Ğ Ğ¸ĞºĞ°',
                 'ci': "ğŸ‡¨ğŸ‡® ĞšĞ¾Ñ‚-Ğ´'Ğ˜Ğ²ÑƒĞ°Ñ€",
                 'cu': 'ğŸ‡¨ğŸ‡º ĞšÑƒĞ±Ğ°',
                 'kg': 'ğŸ‡°ğŸ‡¬ ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·ÑÑ‚Ğ°Ğ½',
                 'lv': 'ğŸ‡±ğŸ‡» Ğ›Ğ°Ñ‚Ğ²Ğ¸Ñ',
                 'lr': 'ğŸ‡±ğŸ‡· Ğ›Ğ¸Ğ±ĞµÑ€Ğ¸Ñ',
                 'lb': 'ğŸ‡±ğŸ‡§ Ğ›Ğ¸Ğ²Ğ°Ğ½',
                 'ly': 'ğŸ‡±ğŸ‡¾ Ğ›Ğ¸Ğ²Ğ¸Ñ',
                 'lt': 'ğŸ‡±ğŸ‡¹ Ğ›Ğ¸Ñ‚Ğ²Ğ°',
                 'lu': 'ğŸ‡±ğŸ‡º Ğ›ÑĞºÑĞµĞ¼Ğ±ÑƒÑ€Ğ³',
                 'my': 'ğŸ‡²ğŸ‡¾ ĞœĞ°Ğ»Ğ°Ğ¹Ğ·Ğ¸Ñ',
                 'mv': 'ğŸ‡²ğŸ‡» ĞœĞ°Ğ»ÑŒĞ´Ğ¸Ğ²Ñ‹',
                 'mt': 'ğŸ‡²ğŸ‡¹ ĞœĞ°Ğ»ÑŒÑ‚Ğ°',
                 'ma': 'ğŸ‡²ğŸ‡¦ ĞœĞ°Ñ€Ğ¾ĞºĞºĞ¾',
                 'mx': 'ğŸ‡²ğŸ‡½ ĞœĞµĞºÑĞ¸ĞºĞ°',
                 'md': 'ğŸ‡²ğŸ‡© ĞœĞ¾Ğ»Ğ´Ğ¾Ğ²Ğ°',
                 'mc': 'ğŸ‡²ğŸ‡¨ ĞœĞ¾Ğ½Ğ°ĞºĞ¾',
                 'mn': 'ğŸ‡²ğŸ‡³ ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»Ğ¸Ñ',
                 'mk': 'ğŸ‡²ğŸ‡° ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½Ğ¸Ñ',
                 'np': 'ğŸ‡³ğŸ‡µ ĞĞµĞ¿Ğ°Ğ»',
                 'nz': 'ğŸ‡³ğŸ‡¿ ĞĞ¾Ğ²Ğ°Ñ Ğ—ĞµĞ»Ğ°Ğ½Ğ´Ğ¸Ñ',
                 'no': 'ğŸ‡³ğŸ‡´ ĞĞ¾Ñ€Ğ²ĞµĞ³Ğ¸Ñ',
                 'ae': 'ğŸ‡¦ğŸ‡ª ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ ĞÑ€Ğ°Ğ±ÑĞºĞ¸Ğµ Ğ­Ğ¼Ğ¸Ñ€Ğ°Ñ‚Ñ‹',
                 'pk': 'ğŸ‡µğŸ‡° ĞŸĞ°ĞºĞ¸ÑÑ‚Ğ°Ğ½',
                 'py': 'ğŸ‡µğŸ‡¾ ĞŸĞ°Ñ€Ğ°Ğ³Ğ²Ğ°Ğ¹',
                 'pe': 'ğŸ‡µğŸ‡ª ĞŸĞµÑ€Ñƒ',
                 'ro': 'ğŸ‡·ğŸ‡´ Ğ ÑƒĞ¼Ñ‹Ğ½Ğ¸Ñ',
                 'sa': 'ğŸ‡¸ğŸ‡¦ Ğ¡Ğ°ÑƒĞ´Ğ¾Ğ²ÑĞºĞ°Ñ ĞÑ€Ğ°Ğ²Ğ¸Ñ',
                 'sc': 'ğŸ‡¸ğŸ‡¨ Ğ¡ĞµĞ¹ÑˆĞµĞ»Ñ‹',
                 'rs': 'ğŸ‡·ğŸ‡¸ Ğ¡ĞµÑ€Ğ±Ğ¸Ñ',
                 'sg': 'ğŸ‡¸ğŸ‡¬ Ğ¡Ğ¸Ğ½Ğ³Ğ°Ğ¿ÑƒÑ€',
                 'sk': 'ğŸ‡¸ğŸ‡° Ğ¡Ğ»Ğ¾Ğ²Ğ°ĞºĞ¸Ñ',
                 'si': 'ğŸ‡¸ğŸ‡® Ğ¡Ğ»Ğ¾Ğ²ĞµĞ½Ğ¸Ñ',
                 'tj': 'ğŸ‡¹ğŸ‡¯ Ğ¢Ğ°Ğ´Ğ¶Ğ¸ĞºĞ¸ÑÑ‚Ğ°Ğ½',
                 'tw': 'ğŸ‡¹ğŸ‡¼ Ğ¢Ğ°Ğ¹Ğ²Ğ°Ğ½ÑŒ',
                 'th': 'ğŸ‡¹ğŸ‡­ Ğ¢Ğ°Ğ¹Ğ»Ğ°Ğ½Ğ´',
                 'tz': 'ğŸ‡¹ğŸ‡¿ Ğ¢Ğ°Ğ½Ğ·Ğ°Ğ½Ğ¸Ñ',
                 'tn': 'ğŸ‡¹ğŸ‡³ Ğ¢ÑƒĞ½Ğ¸Ñ',
                 'tm': 'ğŸ‡¹ğŸ‡² Ğ¢ÑƒÑ€ĞºĞ¼ĞµĞ½Ğ¸ÑÑ‚Ğ°Ğ½',
                 'tr': 'ğŸ‡¹ğŸ‡· Ğ¢ÑƒÑ€Ñ†Ğ¸Ñ',
                 'uz': 'ğŸ‡ºğŸ‡¿ Ğ£Ğ·Ğ±ĞµĞºĞ¸ÑÑ‚Ğ°Ğ½',
                 'uy': 'ğŸ‡ºğŸ‡¾ Ğ£Ñ€ÑƒĞ³Ğ²Ğ°Ğ¹',
                 'ph': 'ğŸ‡µğŸ‡­ Ğ¤Ğ¸Ğ»Ğ¸Ğ¿Ğ¿Ğ¸Ğ½Ñ‹',
                 'fi': 'ğŸ‡«ğŸ‡® Ğ¤Ğ¸Ğ½Ğ»ÑĞ½Ğ´Ğ¸Ñ',
                 'hr': 'ğŸ‡­ğŸ‡· Ğ¥Ğ¾Ñ€Ğ²Ğ°Ñ‚Ğ¸Ñ',
                 'me': 'ğŸ‡²ğŸ‡ª Ğ§ĞµÑ€Ğ½Ğ¾Ğ³Ğ¾Ñ€Ğ¸Ñ',
                 'cz': 'ğŸ‡¨ğŸ‡¿ Ğ§ĞµÑ…Ğ¸Ñ',
                 'cl': 'ğŸ‡¨ğŸ‡± Ğ§Ğ¸Ğ»Ğ¸',
                 'se': 'ğŸ‡¸ğŸ‡ª Ğ¨Ğ²ĞµÑ†Ğ¸Ñ',
                 'lk': 'ğŸ‡±ğŸ‡° Ğ¨Ñ€Ğ¸-Ğ›Ğ°Ğ½ĞºĞ°',
                 'ee': 'ğŸ‡ªğŸ‡ª Ğ­ÑÑ‚Ğ¾Ğ½Ğ¸Ñ',
                 'et': 'ğŸ‡ªğŸ‡¹ Ğ­Ñ„Ğ¸Ğ¾Ğ¿Ğ¸Ñ',
                 'za': 'ğŸ‡¿ğŸ‡¦ Ğ®Ğ¶Ğ½Ğ°Ñ ĞÑ„Ñ€Ğ¸ĞºĞ°',
                 'sd': 'ğŸ‡¸ğŸ‡© Ğ®Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ¡ÑƒĞ´Ğ°Ğ½Ğ°',
                 'jm': 'ğŸ‡¯ğŸ‡² Ğ¯Ğ¼Ğ°Ğ¹ĞºĞ°'}
    name = countries.get(code, None)
    if name is not None:
        return name


class Replacer:
    replacements = {
        'Ğ°': 'a', 'Ğ±': 'Ğ±', 'Ğ²': 'Ğ²', 'Ğ³': 'Ğ³', 'Ğ´': 'Ğ´',
        'Ğµ': 'e', 'Ñ‘': 'Ñ‘', 'Ğ¶': 'Ğ¶', 'Ğ·': 'Ğ·', 'Ğ¸': 'Ğ¸',
        'Ğ¹': 'Ğ¹', 'Ğº': 'k', 'Ğ»': 'Ğ»', 'Ğ¼': 'Ğ¼', 'Ğ½': 'Ğ½',
        'Ğ¾': 'o', 'Ğ¿': 'n', 'Ñ€': 'p', 'Ñ': 'c', 'Ñ‚': 'Ñ‚',
        'Ñƒ': 'y', 'Ñ„': 'É¸', 'Ñ…': 'x', 'Ñ†': 'Ñ†', 'Ñ‡': 'Ñ‡',
        'Ñˆ': 'Ñˆ', 'Ñ‰': 'Ñ‰', 'Ñ‹': 'Ñ‹', 'Ñ': 'Ñ', 'Ñ': 'Ñ',
        'Ñ': 'Ñ',
        'Ğ': 'A', 'Ğ‘': 'Ğ‘', 'Ğ’': 'B', 'Ğ“': 'Ğ“',
        'Ğ”': 'Ğ”', 'Ğ•': 'E', 'Ğ': 'Ã‹', 'Ğ–': 'Ğ–', 'Ğ—': '3',
        'Ğ˜': 'Ğ˜', 'Ğ™': 'Ğ™', 'Ğš': 'K', 'Ğ›': 'Î›', 'Ğœ': 'M',
        'Ğ': 'H', 'Ğ': 'O', 'ĞŸ': 'Î ', 'Ğ ': 'P', 'Ğ¡': 'C',
        'Ğ¢': 'T', 'Ğ£': 'Y', 'Ğ¤': 'Ğ¤', 'Ğ¥': 'X', 'Ğ¦': 'Ğ¦',
        'Ğ§': 'Ğ§', 'Ğ¨': 'Ğ¨', 'Ğ©': 'Ğ©', 'Ğ«': 'ê™', 'Ğ­': 'Ğ­',
        'Ğ®': 'Ğ®', 'Ğ¯': 'Ğ¯',
        'a': 'Ğ°', 'b': 'b', 'c': 'Ñ', 'd': 'd', 'e': 'Ğµ',
        'f': 'f', 'g': 'g', 'h': 'h', 'i': 'i', 'j': 'j',
        'k': 'k', 'l': 'l', 'm': 'm', 'n': 'n', 'o': 'Ğ¾',
        'p': 'Ñ€', 'q': 'q', 'r': 'r', 's': 's', 't': 't',
        'u': 'u', 'v': 'v', 'w': 'w', 'x': 'Ñ…', 'y': 'Ñƒ',
        'z': 'z',
        'A': 'Ğ', 'B': 'Ğ’', 'C': 'Ğ¡', 'D': 'D', 'E': 'Ğ•',
        'F': 'F', 'G': 'G', 'H': 'Ğ', 'I': 'I', 'J': 'J',
        'K': 'Ğš', 'L': 'L', 'M': 'Ğœ', 'N': 'N', 'O': 'Ğ',
        'P': 'Ğ ', 'Q': 'Çª', 'R': 'R', 'S': 'S', 'T': 'Ğ¢',
        'U': 'U', 'V': 'V', 'W': 'W', 'X': 'Ğ¥', 'Y': 'Ğ£',
        'Z': 'Z'
    }

    @staticmethod
    def replace_similar_letters_randomly(text, replacement_probability=0.5):
        if text is None:
            return "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚!!!"
        text_list = list(text)
        for i, char in enumerate(text_list):
            if char in Replacer.replacements and random.random() < replacement_probability:
                text_list[i] = Replacer.replacements[char]

        return ''.join(text_list)


def pagination(callback_data: str, back_page: str):
    from proxy_bot.constants.msg_constants import ShortButton

    if ':' in callback_data:
        page = int(callback_data.split(':')[1])
        clean_callback_data = callback_data.split(':')[0]
    else:
        page = 0
        clean_callback_data = callback_data
    keyboard = InlineKeyboardBuilder()
    default_button = InlineKeyboardButton(text='...', callback_data='None')
    pages = len(Constant.COUNTRIES_CODES) // 15
    if page < 0:
        page = pages
    if page == pages + 1:
        page = 0
    if page <= pages:
        for code in Constant.COUNTRIES_CODES[15 * page: 15 * page + 15]:
            button = InlineKeyboardButton(text=f'{countries_dict(code)}', callback_data=f'country:{code}')
            keyboard.add(button)
        if not len(Constant.COUNTRIES_CODES[15 * page: 15 * page + 15]) // 15:
            keyboard.add(default_button)
    previous = InlineKeyboardButton(text='<<', callback_data=f'{clean_callback_data}:{page - 1}')
    counter = InlineKeyboardButton(text=f'{page + 1}/{pages + 1}', callback_data='None')
    next_b = InlineKeyboardButton(text='>>', callback_data=f'{clean_callback_data}:{page + 1}')
    back_button = InlineKeyboardButton(text=ShortButton.BACK, callback_data=f'{back_page}')
    keyboard.add(previous, counter, next_b)
    keyboard.add(back_button)
    return keyboard.adjust(3).as_markup()




if __name__ == '__main__':
    asyncio.run(check_member_user(123))
